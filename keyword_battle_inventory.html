
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íƒìƒ‰ + ì „íˆ¬ + ì¸ë²¤í† ë¦¬</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background-color: #f0f0f0;
    }
    #log {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      min-height: 200px;
    }
    #inventory {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1rem;
    }
    input, button {
      padding: 0.5rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>âš”ï¸ í‚¤ì›Œë“œ íƒí—˜ ì‹œìŠ¤í…œ (ì „íˆ¬ & ì¸ë²¤í† ë¦¬ í¬í•¨)</h1>

  <div id="log">
    <p>ì–´ë””ë¡œ í–¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
    <ul>
      <li>ì–´ë‘ </li>
      <li>ìˆ˜í’€</li>
    </ul>
  </div>

  <input type="text" id="input" placeholder="ì˜ˆ: ì–´ë‘  ì†ìœ¼ë¡œ ê°„ë‹¤">
  <button onclick="handleInput()">ì…ë ¥</button>

  <div id="inventory">
    <strong>ğŸ’ ì¸ë²¤í† ë¦¬</strong>
    <ul id="invList"></ul>
  </div>

  <script>
    let inventory = [];
    let playerHP = 10;
    let inBattle = false;
    let monster = null;

    const story = {
      "ì–´ë‘ ": {
        ì„¤ëª…: "ì–´ë‘  ì†ì—ì„œ ì°¨ê°€ìš´ ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤. ì•ì—ëŠ” ë¶ˆë¹›ì´ ìˆìŠµë‹ˆë‹¤.",
        ì„ íƒì§€: ["ì°¨ê°€ìš´", "ë¶ˆë¹›"]
      },
      "ì°¨ê°€ìš´": {
        ì„¤ëª…: "ì„œë¦¬ì˜ ì •ë ¹ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤! ì „íˆ¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. [ê³µê²©] ë˜ëŠ” [ë„ë§]",
        ì „íˆ¬: {
          ì´ë¦„: "ì„œë¦¬ ì •ë ¹",
          hp: 5,
          drop: "ì–¼ìŒ ë‹¨ê²€"
        }
      },
      "ê³µê²©": {
        ì „íˆ¬í–‰ë™: "ê³µê²©"
      },
      "ë„ë§": {
        ì „íˆ¬í–‰ë™: "ë„ë§"
      },
      "ë¶ˆë¹›": {
        ì„¤ëª…: "ì‘ì€ ìƒì ë°œê²¬. [ì—´ì–´ë³¸ë‹¤]"
      },
      "ì—´ì–´ë³¸ë‹¤": {
        ì„¤ëª…: "ìƒì ì•ˆì—ì„œ íšŒë³µì•½ì„ ì–»ì—ˆìŠµë‹ˆë‹¤. HP +3",
        íš¨ê³¼: () => {
          playerHP += 3;
          writeToLog("â¤ï¸ HP íšŒë³µ! í˜„ì¬ HP: " + playerHP);
        }
      }
    };

    function writeToLog(html) {
      const log = document.getElementById("log");
      log.innerHTML += "<p>" + html + "</p>";
      log.scrollTop = log.scrollHeight;
    }

    function updateInventoryDisplay() {
      document.getElementById("invList").innerHTML = inventory.map(item => "<li>" + item + "</li>").join("");
    }

    function addItem(item) {
      if (!inventory.includes(item)) {
        inventory.push(item);
        updateInventoryDisplay();
        writeToLog("ğŸ ì•„ì´í…œ íšë“: " + item);
      }
    }

    function handleInput() {
      const val = document.getElementById("input").value.trim();
      document.getElementById("input").value = "";

      if (inBattle) {
        handleBattleAction(val);
        return;
      }

      for (const key in story) {
        if (val.includes(key)) {
          const node = story[key];

          if (node.ì„¤ëª…) writeToLog("<strong>" + key + "</strong>: " + node.ì„¤ëª…);
          if (node.ì„ íƒì§€) {
            writeToLog("ì„ íƒì§€: " + node.ì„ íƒì§€.join(", "));
          }
          if (node.ì „íˆ¬) {
            inBattle = true;
            monster = {
              ì´ë¦„: node.ì „íˆ¬.ì´ë¦„,
              hp: node.ì „íˆ¬.hp,
              drop: node.ì „íˆ¬.drop
            };
            writeToLog("âš”ï¸ " + monster.ì´ë¦„ + "ê³¼ì˜ ì „íˆ¬ ì‹œì‘! ëª¬ìŠ¤í„° HP: " + monster.hp);
          }
          if (node.íš¨ê³¼) node.íš¨ê³¼();
          return;
        }
      }

      writeToLog("ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤...");
    }

    function handleBattleAction(action) {
      if (!monster) return;

      if (action.includes("ê³µê²©")) {
        const damage = Math.floor(Math.random() * 4) + 1; // 1~4
        monster.hp -= damage;
        writeToLog("ğŸ’¥ ëª¬ìŠ¤í„°ì—ê²Œ " + damage + " ë°ë¯¸ì§€ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤. ë‚¨ì€ HP: " + monster.hp);

        if (monster.hp <= 0) {
          writeToLog("âœ… " + monster.ì´ë¦„ + "ì„(ë¥¼) ë¬¼ë¦¬ì³¤ìŠµë‹ˆë‹¤!");
          if (monster.drop) addItem(monster.drop);
          inBattle = false;
          monster = null;
        } else {
          const retaliation = Math.floor(Math.random() * 3) + 1;
          playerHP -= retaliation;
          writeToLog("âš ï¸ ë°˜ê²©! ë‹¹ì‹ ì€ " + retaliation + " í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ HP: " + playerHP);
        }
      } else if (action.includes("ë„ë§")) {
        const escape = Math.random() < 0.5;
        if (escape) {
          writeToLog("ğŸƒâ€â™€ï¸ ì„±ê³µì ìœ¼ë¡œ ë„ë§ì³¤ìŠµë‹ˆë‹¤.");
          inBattle = false;
          monster = null;
        } else {
          writeToLog("âŒ ë„ë§ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤! ê³µê²©ë‹¹í•©ë‹ˆë‹¤.");
          const retaliation = Math.floor(Math.random() * 3) + 1;
          playerHP -= retaliation;
          writeToLog("âš ï¸ í”¼í•´: " + retaliation + " / í˜„ì¬ HP: " + playerHP);
        }
      }
    }
  </script>
</body>
</html>
